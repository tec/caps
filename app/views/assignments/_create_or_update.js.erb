(function(){
  var worker     = <%= @assignment.worker_id %>;
  var project    = <%= @assignment.project_id %>;
  var days       = <%= @assignment.days_per_week %>;
  var assignment = <%= @assignment.id %>;

  var label_id = '#w' + worker + '_p' + project + '_label';
  var form_id  = '#w' + worker + '_p' + project + '_form form';

  <% if @assignment.destroyed? %>
    // if the assignment was deleted, days_per_week should have the value of the previous assignment
    $(label_id).html('<%= @assignment.previous_days %>');
    // form for creating assignments
    $(form_id).attr('id', 'new_assignment');
    $(form_id).attr('action', '/assignments');
    $(form_id + " div input[name='_method']").remove();
  <% else %>
    // update the value of days_per_week
    $(label_id).html(days);
    // form for updating assignments
    $(form_id).attr('id', 'edit_assignment_' + assignment);
    $(form_id).attr('action', '/assignments/' + assignment);
    if ($(form_id + " div input[name='_method']").length == 0)
      $(form_id).children('div').first().append('<input name="_method" type="hidden" value="put">');
  <% end %>
})();
